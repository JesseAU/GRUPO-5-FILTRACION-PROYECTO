name: ValidaciÃ³n de pruebas

on:
  push:
    branches:
      - CI-github-actions

jobs:
  validar:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“‚ Clonando el repositorio
        uses: actions/checkout@v3

      - name: ğŸ“„ Verificando existencia de archivos
        run: |
          echo "ğŸ” Verificando archivos..."
          if [ ! -f index.html ]; then
            echo "âŒ Falta el archivo index.html"
            exit 1
          fi
          if [ ! -f style.css ]; then
            echo "âŒ Falta el archivo style.css"
            exit 1
          fi
          if [ ! -f script.js ]; then
            echo "âŒ Falta el archivo script.js"
            exit 1
          fi
          echo "âœ… Todos los archivos estÃ¡n presentes ğŸ‰"

      - name: ğŸ¨ Validando CSS con estilo ğŸ˜
        uses: stylelint/stylelint-action@v1
        with:
          files: "**/*.css"

      - name: ğŸ›  Instalando dependencias para JS
        run: |
          echo "ğŸ“¦ Instalando dependencias mÃ¡gicas..."
          npm install eslint

      - name: ğŸ“œ Creando configuraciÃ³n ESLint por defecto
        run: |
          echo "âœ¨ Creando configuraciÃ³n ESLint..."
          echo "module.exports = { env: { browser: true, es2021: true }, extends: 'eslint:recommended', parserOptions: { ecmaVersion: 'latest', sourceType: 'module' }, rules: {} };" > eslint.config.js

      - name: âš¡ Validando JavaScript
        run: |
          echo "ğŸš€ Validando JavaScript..."
          npx eslint script.js || (echo 'âŒ Errores encontrados en JavaScript. ğŸ’”' && exit 1)
          echo "âœ… JavaScript validado correctamente ğŸ’–"
