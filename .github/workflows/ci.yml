name: "CI - ValidaciÃ³n Frontend"

on:
  push:
    branches:
      - main
      - "interfaz-usuario(diseÃ±o)"
      - "logica-filtro(JS)"
  pull_request:
    branches:
      - main
      - "interfaz-usuario(diseÃ±o)"
      - "logica-filtro(JS)"

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
      - name: "ğŸ“¥ Clonar repositorio"
        uses: actions/checkout@v3

      # InstalaciÃ³n de herramientas y configs necesarias
      - name: "âš™ï¸ Instalar validadores"
        run: |
          npm install -g htmlhint stylelint stylelint-config-standard eslint
          echo '{ "extends": "stylelint-config-standard" }' > .stylelintrc.json

      # Validar HTML (main o interfaz-usuario)
      - name: "âœ… Validar HTML"
        if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/interfaz-usuario(diseÃ±o)'
        run: |
          echo "ğŸ” Validando HTML..."
          htmlhint "**/*.html"

      # Validar CSS (main o interfaz-usuario)
      - name: "ğŸ¨ Validar CSS"
        if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/interfaz-usuario(diseÃ±o)'
        run: |
          echo "ğŸ” Validando CSS..."
          stylelint "**/*.css"

      # Validar JavaScript (main o logica-filtro)
      - name: "ğŸ› ï¸ Validar JavaScript"
        if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/logica-filtro(JS)'
        run: |
          echo "ğŸ” Validando JavaScript..."
          eslint "**/*.js"

      # Mensaje final si todo OK
      - name: "ğŸ‰ Todo correcto"
        if: ${{ success() }}
        run: echo "âœ… ValidaciÃ³n completada correctamente."

      # Mensaje si hay errores
      - name: "ğŸš¨ Error encontrado"
        if: ${{ failure() }}
        run: echo "âŒ Se encontraron errores en la validaciÃ³n."
