name: "CI - Validación Frontend"

on:
  push:
    branches:
      - main
      - "interfaz-usuario(diseño)"
      - "logica-filtro(JS)"
  pull_request:
    branches:
      - main
      - "interfaz-usuario(diseño)"
      - "logica-filtro(JS)"

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
      - name: "📥 Clonar repositorio"
        uses: actions/checkout@v3

      # Instalación de herramientas de validación
      - name: "⚙️ Instalar validadores"
        run: |
          npm install -g htmlhint stylelint eslint

      # Validar HTML (solo si la rama es main o interfaz-usuario(diseño))
      - name: "✅ Validar HTML"
        if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/interfaz-usuario(diseño)'
        run: |
          echo "🔍 Validando HTML..."
          htmlhint "**/*.html"

      # Validar CSS (solo si la rama es main o interfaz-usuario(diseño))
      - name: "🎨 Validar CSS"
        if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/interfaz-usuario(diseño)'
        run: |
          echo "🔍 Validando CSS..."
          stylelint "**/*.css"

      # Validar JavaScript (solo si la rama es main o logica-filtro(JS))
      - name: "🛠️ Validar JavaScript"
        if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/logica-filtro(JS)'
        run: |
          echo "🔍 Validando JavaScript..."
          eslint "**/*.js"

      # Mensaje final
      - name: "🎉 Todo correcto"
        if: ${{ success() }}
        run: echo "✅ Validación completada correctamente."

      - name: "🚨 Error encontrado"
        if: ${{ failure() }}
        run: echo "❌ Se encontraron errores en la validación."
