name: Validación de de pruebas

on:
  push:
    branches:
      - interfaz-usuario
      - logica-filtro

jobs:
  validar:
    runs-on: ubuntu-latest
    steps:
      - name: 📂 Clonando el repositorio
        uses: actions/checkout@v3

      - name: 📄 Verificando existencia de archivos
        run: |
          echo "🔍 Verificando archivos..."
          if [ ! -f index.html ]; then
            echo "❌ Falta el archivo index.html"
            exit 1
          fi
          if [ ! -f style.css ]; then
            echo "❌ Falta el archivo style.css"
            exit 1
          fi
          if [ ! -f script.js ]; then
            echo "❌ Falta el archivo script.js"
            exit 1
          fi
          echo "✅ Todos los archivos están presentes"

      - name: 🎨 Validando CSS
        uses: stylelint/stylelint-action@v1
        with:
          files: "**/*.css"

      - name: 🛠 Instalando dependencias para JS
        run: |
          echo "📦 Instalando dependencias..."
          npm install eslint

      - name: 📜 Creando configuración ESLint por defecto
        run: |
          echo "module.exports = { env: { browser: true, es2021: true }, extends: 'eslint:recommended', parserOptions: { ecmaVersion: 'latest', sourceType: 'module' }, rules: {} };" > eslint.config.js

      - name: ⚡ Validando JavaScript
        run: |
          echo "🚀 Validando JavaScript..."
          npx eslint script.js || (echo '❌ Errores encontrados en JavaScript' && exit 1)
          echo "✅ JavaScript validado correctamente"
